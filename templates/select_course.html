{% extends "base.html" %}

{% block mainpage %}


<div id="content" class="main-content pb-3" style="overflow: hidden;">

    {% if html_display.warn_code == 2 %}
    <div class="alert alert-success text-center mb-0">{{html_display.warn_message}}</div>
    {% elif html_display.warn_code == 1 %}
    <div class="alert alert-warning text-center mb-0">{{html_display.warn_message}}</div>
    {% endif %}

    <div style="text-align: center;">
        <br>
        <h4 class="text-primary">{{html_display.current_year}}学年{{html_display.semester}}季学期书院课程选课页面</h4>
        <!-- TODO : 从后端获取学期数据-->
        <br>
    </div>

    <div style="text-align: left; margin-left: 2%;">
        <p style="margin-bottom: 0%;">预选时间：{{html_display.yx_election_start}}至{{html_display.yx_election_end}}</p>
        <p style="margin-top: 0%;">补退选时间：{{html_display.btx_election_start}}至{{html_display.btx_election_end}}</p>
    </div>

    <!--  BEGIN SWITCH TAB  -->
    <ul class="nav nav-tabs nav-tabs-solid nav-justified" role="tablist">
        <li class="nav-item">
            <b class="nav-link active" data-toggle="tab" role="tab" href="#information">
                全部课程
                <a data-toggle="tooltip" data-placement="bottom" title="展示全部的书院课程">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-question-circle-fill" viewBox="0 0 22 22">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z" />
                    </svg>
                </a>
            </b>
        </li>
        <li class="nav-item">
            <b class="nav-link" data-toggle="tab" role="tab" href="#mycourses">
                我的课程
                <a data-toggle="tooltip" data-placement="bottom" title="展示你已预选课的书院课程，是否选课成功见预选结束后的抽签结果">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-question-circle-fill" viewBox="0 0 22 22">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z" />
                    </svg>
                </a>
            </b>
        </li>
    </ul>
    <!--  END SWITCH TAB  -->

    <div class="container-fluid tab-content" id="myTabContent">
        <!--TODO : 后端对接bool值-->
        {% if is_drawing == True %}
        <div class="tab-pane fade show active" id="information" role="tabpanel">
            <div class="col-12 layout-top-spacing">
                <br>
                <p style="text-align: center;">抽签进行中，暂不支持选课！</p>
            </div>
        </div>
        {% elif is_end == True %}
        <div class="tab-pane fade show active" id="information" role="tabpanel">
            <div class="col-12 layout-top-spacing">
                <br>
                <p style="text-align: center;">选课已经全部结束，请前往”我的课程“查看选课结果！</p>
            </div>
        </div>

        {% else %}
        <!--  BEGIN INFORMATION TAB  -->
        <div class="tab-pane fade show active" id="information" role="tabpanel">
            <div class="col-12 layout-top-spacing">
                <div class="statbox widget box box-shadow">
                    <!-- Nav pills -->
                    <ul class="nav nav-pills" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="pill" href="#all">
                                <span class="badge badge-pill badge-secondary">全部课程</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="pill" href="#menu0">
                                <span class="badge badge-pill" style="color:white; background-color: #0092c7;">德</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="pill" href="#menu1">
                                <span class="badge badge-pill" style="color:white; background-color: #22c3aa;">智</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="pill" href="#menu2">
                                <span class="badge badge-pill" style="color:white; background-color: #AD8976;">体</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="pill" href="#menu3">
                                <span class="badge badge-pill" style="color:white; background-color: #f3b59b;">美</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="pill" href="#menu4">
                                <span class="badge badge-pill" style="color:white; background-color: #f29c9c;">劳</span>
                            </a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div id="all" class=" tab-pane active">
                            <table class="table table-striped table-responsive-sm table-active">
    
                                <thead>
                                  <tr>
                                    <th scope="col" width="20%">课程名称</th>
                                    <th scope="col" width="20%">上课时间</th>
                                    <th scope="col" width="10%">课程周数</th>
                                    <th scope="col" width="10%">课程类型</th>
                                    <th scope="col" width="15%">状态</th>
                                    <th scope="col" width="15%">容量/选课人数</th>
                                    <th scope="col" >操作</th>
                                  </tr>
                                </thead>
            
                                <tbody class="table">
                                  {% for course in unselected_display %}
                                  <tr>
                                    <th scope="row">
                                        <!--TODO : 课程小组头像路径（后端调用get_user_ava获得）-->
                                        <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                                        <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                            <u>{{course.name}}</u>
                                        </a>
                                    </th>
                                    <td>
                                        {% for time in course.time_set %}
                                        <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                            {{time}}<br>
                                        {% endfor %}
                                        {% if course.time_set|length == 0 %}
                                            时间待定
                                        {% endif %}
                                    </td>
                                    <td>{{course.times}}</td>
                                    <td>{{course.type}}</td>
                                    <!--注意这里的status是课程的，除了已撤销的四个都在这儿-->
                                    <td>
                                        {% if course.status == "未开始" %}
                                        <span class="badge badge-pill badge-dark">{{course.status}}</span>
                                        {% elif course.status == "预选" %}
                                        <span class="badge badge-pill badge-secondary">{{course.status}}</span>
                                        {% elif course.status == "补退选" %}
                                        <span class="badge badge-pill badge-info">{{course.status}}</span>
                                        {% elif course.status == "选课结束" %}
                                        <span class="badge badge-pill badge-primary">{{course.status}}</span>
                                        {% else %}
                                        <span class="badge badge-pill badge-warning">{{course.status}}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{course.capacity}}/{{course.current_participants}}</td>
                                    <td>
                                        <form action="/selectCourse/" method="post">
                                            <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                            <input type="hidden" id="action" name="action"value="select" />
                                            {% if course.status != "预选" and course.status != "补退选" %}
                                            <button type="submit" class="btn btn-primary btn-sm" disabled>选课</button>
                                            {% else %}
                                            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal-{{course.course_id}}">选课</button>
                                            <div class="modal fade" id="myModal-{{course.course_id}}">
                                                <div class="modal-dialog modal-dialog-centered">
                                                  <div class="modal-content">
                                                    <!-- 模态框主体 -->
                                                    <div class="modal-body">
                                                      你确定要选课程《{{course.name}}》吗？
                                                    </div>
                                                    <!-- 模态框底部 -->
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                                    </div>
                                                  </div>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </form>
                                        
                                    </td>
                                  </tr>
                                  {% endfor %}
                                
                                </tbody>
                            </table>
                        </div>
                        <div id="menu0" class="tab-pane fade">
                            <table class="table table-striped table-responsive-sm table-active">
    
                                <thead>
                                  <tr>
                                    <th scope="col" width="20%">课程名称</th>
                                    <th scope="col" width="20%">上课时间</th>
                                    <th scope="col" width="10%">课程周数</th>
                                    <th scope="col" width="10%">课程类型</th>
                                    <th scope="col" width="15%">状态</th>
                                    <th scope="col" width="15%">容量/选课人数</th>
                                    <th scope="col" >操作</th>
                                  </tr>
                                </thead>
            
                                <tbody class="table">
                                  {% for course in courses.0 %}
                                  <tr>
                                    <th scope="row">
                                        <!--TODO : 课程小组头像路径（后端调用get_user_ava获得）-->
                                        <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                                        <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                            <u>{{course.name}}</u>
                                        </a>
                                    </th>
                                    <td>
                                        {% for time in course.time_set %}
                                        <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                            {{time}}<br>
                                        {% endfor %}
                                        {% if course.time_set|length == 0 %}
                                            时间待定
                                        {% endif %}
                                    </td>
                                    <td>{{course.times}}</td>
                                    <td>{{course.type}}</td>
                                    <!--注意这里的status是课程的，除了已撤销的四个都在这儿-->
                                    <td>
                                        {% if course.status == "未开始" %}
                                        <span class="badge badge-pill badge-dark">{{course.status}}</span>
                                        {% elif course.status == "预选" %}
                                        <span class="badge badge-pill badge-secondary">{{course.status}}</span>
                                        {% elif course.status == "补退选" %}
                                        <span class="badge badge-pill badge-info">{{course.status}}</span>
                                        {% elif course.status == "选课结束" %}
                                        <span class="badge badge-pill badge-primary">{{course.status}}</span>
                                        {% else %}
                                        <span class="badge badge-pill badge-warning">{{course.status}}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{course.capacity}}/{{course.current_participants}}</td>
                                    <td>
                                        <form action="/selectCourse/" method="post">
                                            <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                            <input type="hidden" id="action" name="action"value="select" />
                                            {% if course.status != "预选" and course.status != "补退选" %}
                                            <button type="submit" class="btn btn-primary btn-sm" disabled>选课</button>
                                            {% else %}
                                            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal0-{{course.course_id}}">选课</button>
                                            <div class="modal fade" id="myModal0-{{course.course_id}}">
                                                <div class="modal-dialog modal-dialog-centered">
                                                  <div class="modal-content">
                                                    <!-- 模态框主体 -->
                                                    <div class="modal-body">
                                                      你确定要选课程《{{course.name}}》吗？
                                                    </div>
                                                    <!-- 模态框底部 -->
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                                    </div>
                                                  </div>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </form>
                                    </td>
                                  </tr>
                                  {% endfor %}
                                
                                </tbody>
                            </table>
                        </div>
                          
                        <div id="menu1" class="tab-pane fade">
                            <table class="table table-striped table-responsive-sm table-active">
    
                                <thead>
                                  <tr>
                                    <th scope="col" width="20%">课程名称</th>
                                    <th scope="col" width="20%">上课时间</th>
                                    <th scope="col" width="10%">课程周数</th>
                                    <th scope="col" width="10%">课程类型</th>
                                    <th scope="col" width="15%">状态</th>
                                    <th scope="col" width="15%">容量/选课人数</th>
                                    <th scope="col" >操作</th>
                                  </tr>
                                </thead>
            
                                <tbody class="table">
                                
                                  {% for course in courses.1 %}
                                  <tr>
                                    <th scope="row">
                                        <!--TODO : 课程小组头像路径（后端调用get_user_ava获得）-->
                                        <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                                        <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                            <u>{{course.name}}</u>
                                        </a>
                                    </th>
                                    <td>
                                        {% for time in course.time_set %}
                                        <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                            {{time}}<br>
                                        {% endfor %}
                                        {% if course.time_set|length == 0 %}
                                            时间待定
                                        {% endif %}
                                    </td>
                                    <td>{{course.times}}</td>
                                    <td>{{course.type}}</td>
                                    <!--注意这里的status是课程的，除了已撤销的四个都在这儿-->
                                    <td>
                                        {% if course.status == "未开始" %}
                                        <span class="badge badge-pill badge-dark">{{course.status}}</span>
                                        {% elif course.status == "预选" %}
                                        <span class="badge badge-pill badge-secondary">{{course.status}}</span>
                                        {% elif course.status == "补退选" %}
                                        <span class="badge badge-pill badge-info">{{course.status}}</span>
                                        {% elif course.status == "选课结束" %}
                                        <span class="badge badge-pill badge-primary">{{course.status}}</span>
                                        {% else %}
                                        <span class="badge badge-pill badge-warning">{{course.status}}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{course.capacity}}/{{course.current_participants}}</td>
                                    <td>
                                        <form action="/selectCourse/" method="post">
                                            <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                            <input type="hidden" id="action" name="action"value="select" />
                                            {% if course.status != "预选" and course.status != "补退选" %}
                                            <button type="submit" class="btn btn-primary btn-sm" disabled>选课</button>
                                            {% else %}
                                            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal1-{{course.course_id}}">选课</button>
                                            <div class="modal fade" id="myModal1-{{course.course_id}}">
                                                <div class="modal-dialog modal-dialog-centered">
                                                  <div class="modal-content">
                                                    <!-- 模态框主体 -->
                                                    <div class="modal-body">
                                                      你确定要选课程《{{course.name}}》吗？
                                                    </div>
                                                    <!-- 模态框底部 -->
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                                    </div>
                                                  </div>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </form>
                                        
                                    </td>
                                  </tr>
                                  {% endfor %}
                                
                                </tbody>
                            </table>
                        </div>
                        <div id="menu2" class="tab-pane fade">
                            <table class="table table-striped table-responsive-sm table-active">
    
                                <thead>
                                  <tr>
                                    <th scope="col" width="20%">课程名称</th>
                                    <th scope="col" width="20%">上课时间</th>
                                    <th scope="col" width="10%">课程周数</th>
                                    <th scope="col" width="10%">课程类型</th>
                                    <th scope="col" width="15%">状态</th>
                                    <th scope="col" width="15%">容量/选课人数</th>
                                    <th scope="col" >操作</th>
                                  </tr>
                                </thead>
            
                                <tbody class="table">
                                
                                  {% for course in courses.2 %}
                                  <tr>
                                    <th scope="row">
                                        <!--TODO : 课程小组头像路径（后端调用get_user_ava获得）-->
                                        <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                                        <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                            <u>{{course.name}}</u>
                                        </a>
                                    </th>
                                    <td>
                                        {% for time in course.time_set %}
                                        <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                            {{time}}<br>
                                        {% endfor %}
                                        {% if course.time_set|length == 0 %}
                                            时间待定
                                        {% endif %}
                                    </td>
                                    <td>{{course.times}}</td>
                                    <td>{{course.type}}</td>
                                    <!--注意这里的status是课程的，除了已撤销的四个都在这儿-->
                                    <td>
                                        {% if course.status == "未开始" %}
                                        <span class="badge badge-pill badge-dark">{{course.status}}</span>
                                        {% elif course.status == "预选" %}
                                        <span class="badge badge-pill badge-secondary">{{course.status}}</span>
                                        {% elif course.status == "补退选" %}
                                        <span class="badge badge-pill badge-info">{{course.status}}</span>
                                        {% elif course.status == "选课结束" %}
                                        <span class="badge badge-pill badge-primary">{{course.status}}</span>
                                        {% else %}
                                        <span class="badge badge-pill badge-warning">{{course.status}}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{course.capacity}}/{{course.current_participants}}</td>
                                    <td>
                                        <form action="/selectCourse/" method="post">
                                            <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                            <input type="hidden" id="action" name="action"value="select" />
                                            {% if course.status != "预选" and course.status != "补退选" %}
                                            <button type="submit" class="btn btn-primary btn-sm" disabled>选课</button>
                                            {% else %}
                                            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal2-{{course.course_id}}">选课</button>
                                            <div class="modal fade" id="myModal2-{{course.course_id}}">
                                                <div class="modal-dialog modal-dialog-centered">
                                                  <div class="modal-content">
                                                    <!-- 模态框主体 -->
                                                    <div class="modal-body">
                                                      你确定要选课程《{{course.name}}》吗？
                                                    </div>
                                                    <!-- 模态框底部 -->
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                                    </div>
                                                  </div>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </form>
                                        
                                    </td>
                                  </tr>
                                  {% endfor %}
                                
                                </tbody>
                            </table>
                        </div>
                        <div id="menu3" class="tab-pane fade">
                            <table class="table table-striped table-responsive-sm table-active">
    
                                <thead>
                                  <tr>
                                    <th scope="col" width="20%">课程名称</th>
                                    <th scope="col" width="20%">上课时间</th>
                                    <th scope="col" width="10%">课程周数</th>
                                    <th scope="col" width="10%">课程类型</th>
                                    <th scope="col" width="15%">状态</th>
                                    <th scope="col" width="15%">容量/选课人数</th>
                                    <th scope="col" >操作</th>
                                  </tr>
                                </thead>
            
                                <tbody class="table">
                                
                                  {% for course in courses.3 %}
                                  <tr>
                                    <th scope="row">
                                        <!--TODO : 课程小组头像路径（后端调用get_user_ava获得）-->
                                        <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                                        <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                            <u>{{course.name}}</u>
                                        </a>
                                    </th>
                                    <td>
                                        {% for time in course.time_set %}
                                        <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                            {{time}}<br>
                                        {% endfor %}
                                        {% if course.time_set|length == 0 %}
                                            时间待定
                                        {% endif %}
                                    </td>
                                    <td>{{course.times}}</td>
                                    <td>{{course.type}}</td>
                                    <!--注意这里的status是课程的，除了已撤销的四个都在这儿-->
                                    <td>
                                        {% if course.status == "未开始" %}
                                        <span class="badge badge-pill badge-dark">{{course.status}}</span>
                                        {% elif course.status == "预选" %}
                                        <span class="badge badge-pill badge-secondary">{{course.status}}</span>
                                        {% elif course.status == "补退选" %}
                                        <span class="badge badge-pill badge-info">{{course.status}}</span>
                                        {% elif course.status == "选课结束" %}
                                        <span class="badge badge-pill badge-primary">{{course.status}}</span>
                                        {% else %}
                                        <span class="badge badge-pill badge-warning">{{course.status}}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{course.capacity}}/{{course.current_participants}}</td>
                                    <td>
                                        <form action="/selectCourse/" method="post">
                                            <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                            <input type="hidden" id="action" name="action"value="select" />
                                            {% if course.status != "预选" and course.status != "补退选" %}
                                            <button type="submit" class="btn btn-primary btn-sm" disabled>选课</button>
                                            {% else %}
                                            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal3-{{course.course_id}}">选课</button>
                                            <div class="modal fade" id="myModal3-{{course.course_id}}">
                                                <div class="modal-dialog modal-dialog-centered">
                                                  <div class="modal-content">
                                                    <!-- 模态框主体 -->
                                                    <div class="modal-body">
                                                      你确定要选课程《{{course.name}}》吗？
                                                    </div>
                                                    <!-- 模态框底部 -->
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                                    </div>
                                                  </div>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </form>
                                        
                                    </td>
                                  </tr>
                                  {% endfor %}
                                
                                </tbody>
                            </table>
                        </div>
                        <div id="menu4" class="tab-pane fade">
                            <table class="table table-striped table-responsive-sm table-active">
    
                                <thead>
                                  <tr>
                                    <th scope="col" width="20%">课程名称</th>
                                    <th scope="col" width="20%">上课时间</th>
                                    <th scope="col" width="10%">课程周数</th>
                                    <th scope="col" width="10%">课程类型</th>
                                    <th scope="col" width="15%">状态</th>
                                    <th scope="col" width="15%">容量/选课人数</th>
                                    <th scope="col" >操作</th>
                                  </tr>
                                </thead>
            
                                <tbody class="table">
                                
                                  {% for course in courses.4 %}
                                  <tr>
                                    <th scope="row">
                                        <!--TODO : 课程小组头像路径（后端调用get_user_ava获得）-->
                                        <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                                        <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                            <u>{{course.name}}</u>
                                        </a>
                                    </th>
                                    <td>
                                        {% for time in course.time_set %}
                                        <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                            {{time}}<br>
                                        {% endfor %}
                                        {% if course.time_set|length == 0 %}
                                            时间待定
                                        {% endif %}
                                    </td>
                                    <td>{{course.times}}</td>
                                    <td>{{course.type}}</td>
                                    <!--注意这里的status是课程的，除了已撤销的四个都在这儿-->
                                    <td>
                                        {% if course.status == "未开始" %}
                                        <span class="badge badge-pill badge-dark">{{course.status}}</span>
                                        {% elif course.status == "预选" %}
                                        <span class="badge badge-pill badge-secondary">{{course.status}}</span>
                                        {% elif course.status == "补退选" %}
                                        <span class="badge badge-pill badge-info">{{course.status}}</span>
                                        {% elif course.status == "选课结束" %}
                                        <span class="badge badge-pill badge-primary">{{course.status}}</span>
                                        {% else %}
                                        <span class="badge badge-pill badge-warning">{{course.status}}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{course.capacity}}/{{course.current_participants}}</td>
                                    <td>
                                        <form action="/selectCourse/" method="post">
                                            <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                            <input type="hidden" id="action" name="action"value="select" />
                                            {% if course.status != "预选" and course.status != "补退选" %}
                                            <button type="submit" class="btn btn-primary btn-sm" disabled>选课</button>
                                            {% else %}
                                            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#myModal4-{{course.course_id}}">选课</button>
                                            <div class="modal fade" id="myModal4-{{course.course_id}}">
                                                <div class="modal-dialog modal-dialog-centered">
                                                  <div class="modal-content">
                                                    <!-- 模态框主体 -->
                                                    <div class="modal-body">
                                                      你确定要选课程《{{course.name}}》吗？
                                                    </div>
                                                    <!-- 模态框底部 -->
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                                    </div>
                                                  </div>
                                                </div>
                                            </div>
                                            {% endif %}
                                        </form>
                                        
                                    </td>
                                  </tr>
                                  {% endfor %}
                                
                                </tbody>
                            </table>    
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!--  END INFORMATION TAB  -->
        {% endif %}

        <!--  BEGIN MYCOURSE TAB  -->
        <div class="tab-pane fade" id="mycourses" role="tabpanel">
            <div class="col-12 layout-top-spacing">
                <div class="statbox widget box box-shadow">
                    <table class="table table-striped table-responsive-sm table-active">
    
                    <thead>
                        <tr>
                            <th scope="col" width="20%">课程名称</th>
                            <th scope="col" width="20%">上课时间</th>
                            <th scope="col" width="10%">课程周数</th>
                            <th scope="col" width="10%">课程类型</th>
                            <th scope="col" width="15%">状态</th>
                            <th scope="col" width="15%">容量/选课人数</th>
                            <th scope="col" >操作</th>
                        </tr>
                    </thead>

                    <tbody class="table">
                                            
                      {% for course in selected_display %}
                      <tr>
                        <th scope="row">
                            <img src={{ course.avatar_path }} width="24" height="24" alt="avatar">
                            <a href='/viewCourse/?courseid={{ course.course_id }}'><!--要做一个新的课程详情页来着..先放着-->
                                <u>{{course.name}}</u>
                            </a>
                        </th>
                        <td>
                            {% for time in course.time_set %}
                            <!-- {{time.week}}&nbsp;{{time.start}}-{{time.end}}<br>-->
                                {{time}}<br>
                            {% endfor %}
                            {% if course.time_set|length == 0 %}
                                时间待定
                            {% endif %}
                        </td>
                        <td>{{course.times}}</td>
                        <td>{{course.type}}</td>
                        <td>
                            <!--TODO : 对接后端bool值-->
                            {% if is_drawing == True %}
                            <span class="badge badge-pill badge-info">抽签中</span>
                            {% elif course.student_status == "已选课" %}
                            <span class="badge badge-pill badge-secondary">{{course.student_status}}</span>
                            {% elif course.student_status == "选课成功" %}
                            <span class="badge badge-pill badge-success">{{course.student_status}}</span>
                            {% elif course.student_status == "选课失败" %}
                            <span class="badge badge-pill badge-danger">{{course.student_status}}</span>
                            {% endif %}
                        </td>
                        <td>{{course.capacity}}/{{course.current_participants}}</td>
                        <td>
                            <form action="/selectCourse/" method="post">
                                <input type="hidden" id="courseid" name="courseid"value="{{course.course_id}}" />
                                <input type="hidden" id="action" name="action"value="cancel" />
                                {% if course.status != "预选" and course.status != "补退选" or course.student_status == "选课失败" %}
                                <button type="submit" class="btn btn-danger btn-sm" disabled>退课</button>
                                {% else %}
                                <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#myModalcancel-{{course.course_id}}">退课</button>
                                {% endif %}
                                <div class="modal fade" id="myModalcancel-{{course.course_id}}">
                                    <div class="modal-dialog modal-dialog-centered">
                                      <div class="modal-content">
                                        <!-- 模态框主体 -->
                                        <div class="modal-body">
                                          你确定要退课程《{{course.name}}》吗？
                                        </div>
                                        <!-- 模态框底部 -->
                                        <div class="modal-footer">
                                            <button type="submit" class="btn btn-primary btn-sm">确定</button>
                                            <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">关闭</button>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                            </form>
                            
                        </td>
                        
                      </tr>

                      {% endfor %}

                    
                    </tbody>
                </table>
                </div>
            </div>

        </div>
        <!--  END MYCOURSE TAB  -->

    </div>

</div>




{% endblock %}